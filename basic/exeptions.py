"""
    Исключения — это события, которые нарушают нормальный ход выполнения программы.
    Они позволяют обнаруживать и обрабатывать ошибки во время выполнения, не прерывая работу программы полностью.
    В Python исключения — это объекты, и они образуют иерархию классов.
"""

"""
    1 - базовая обработка исключений
    2 - типы исключений
    3 - несколько обработчиков
    4 - универсальный обработчик
    5 - блок else и finally
    6 - выбрасывание исключений
    7 - пользовательские исключения
    8 - иерархия исключений
    9 - обработка исключений в функциях
"""

### 1 - базовая обработка исключений
"""
    Для обработки исключений используются блоки:
    - try — код, который может вызвать исключение
    - except — обработка конкретного исключения
    - else — выполняется, если не было исключений
    - finally — выполняется всегда (до возврата из функции)
"""
# Пример: простая обработка исключения
try:
    result = 10 / 0
except ZeroDivisionError:
    print("Деление на ноль недопустимо")

# 2 - типы исключений
"""
    В Python есть встроенные исключения:
    - ValueError — ошибка значения
    - TypeError — ошибка типа
    - IndexError — ошибка индекса
    - KeyError — ошибка ключа
    - AttributeError — ошибка атрибута
    - FileNotFoundError — файл не найден
    и другие
"""
# Пример: разные типы исключений
try:
    lst = [1, 2, 3]
    print(lst[10])
except IndexError:
    print("Индекс вне диапазона")
try:
    d = {"a": 1}
    print(d["b"])
except KeyError:
    print("Ключ не найден")

### 3 - несколько обработчиков
"""
    Можно обрабатывать разные исключения по-разному.
    Также можно использовать несколько исключений в одном блоке except.
"""

try:
    value = int(input("Введите число: "))
    result = 10 / value
except ValueError:
    print("Это не число!")
except ZeroDivisionError:
    print("Деление на ноль!")
except (TypeError, AttributeError):
    print("Ошибка типа или атрибута")

### 4 - универсальный обработчик
"""
    Для перехвата всех остальных исключений используется except Exception.
    Не рекомендуется использовать except: — это ловит все исключения, включая системные.
"""
def risky_operation():
     pass
try:
    risky_operation()
except Exception as e:
    print(f"Произошло исключение: {e}")

### 5 - блок else и finally
"""
    - else — выполняется, если в try не было исключений
    - finally — выполняется всегда, даже если был return
"""
try:
    result = 10 / 2
except ZeroDivisionError:
    print("Ошибка деления")
else:
    print("Ошибок не было")
finally:
    print("Этот блок выполнится всегда")

### 6 - выбрасывание исключений
"""
    Для выбрасывания исключения используется raise.
    Можно выбросить:
    - существующее исключение
    - новое исключение
    - повторно исключение (raise без аргументов)
"""
# Пример: выбрасывание исключения
def check_positive(x):
    if x <= 0:
        raise ValueError("Число должно быть положительным")
    return x

try:
    check_positive(-5)
except ValueError as e:
    print(e) # Число должно быть положительным

### 7 - пользовательские исключения
"""
    Можно создавать свои классы исключений, наследуясь от базовых классов.
    Обычно наследуют от Exception или его подклассов.
"""
class CustomError(Exception):
    """Пользовательское исключение"""
    def init(self, message):
        self.message = message
        super().__init__(self.message)

try:
    raise CustomError("Это моя ошибка")
except CustomError as e:
    print(e)

### 8 - иерархия исключений
"""
    Все исключения наследуются от базового класса BaseException:
    BaseException
    +-- SystemExit
    +-- KeyboardInterrupt
    +-- GeneratorExit
    +-- Exception
    +-- StopIteration
    +-- ArithmeticError
    | +-- ZeroDivisionError
    +-- LookupError
    | +-- IndexError
    | +-- KeyError
    +-- ValueError
"""

### 9 - обработка исключений в функциях
"""
    Исключения могут всплывать из вложенных функций.
    Если не обработать в текущей функции, исключение передаётся выше.
"""
def divide(a, b):
    return a / b

def calculate():
    try:
        return divide(10, 0)
    except ZeroDivisionError:
        print("Ошибка в calculate")
        return None

calculate()

"""
    Основные особенности исключений:
    1. Позволяют обнаруживать и обрабатывать ошибки во время выполнения.
    2. Используются блоки `try`, `except`, `else`, `finally`.
    3. Исключения — это объекты, наследуемые от `BaseException`.
    4. Можно создавать свои исключения.
    5. Исключения всплывают вверх по стеку вызовов.
    6. Позволяют делать программы более устойчивыми и безопасными.
    7. Не стоит использовать исключения для управления потоком программы.
"""